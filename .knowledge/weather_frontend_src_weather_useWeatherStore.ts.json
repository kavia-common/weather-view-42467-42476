{"is_source_file": true, "format": "TypeScript", "description": "This file defines a Vue.js composable store 'useWeatherStore' for managing weather-related state within a frontend application. It includes state variables, methods to update location and fetch weather data, error handling, and persistence of user preferences such as units. It interacts with external services and configuration types.", "external_files": ["./config", "./WeatherService"], "external_methods": ["getCurrentAndForecast"], "published": ["useWeatherStore"], "classes": [], "methods": [{"name": "export function useWeatherStore() { useWeatherStore", "description": "Public method that provides access to the singleton weather store instance, initializing it if necessary.", "scope": "", "scopeKind": ""}, {"name": "function buildStore() { buildStore", "description": "Internal function that constructs the reactive store with state variables and methods for weather data management.", "scope": "", "scopeKind": ""}], "calls": ["getCurrentAndForecast", "localStorage.getItem", "localStorage.setItem", "window.__weatherStore", "ref", "computed", "reactive", "typeof", "new Date()", "void refresh()"], "search-terms": ["useWeatherStore", "WeatherResponse", "getCurrentAndForecast", "Vue store", "weather state"], "state": 2, "file_id": 21, "knowledge_revision": 49, "git_revision": "", "revision_history": [{"44": ""}, {"48": ""}, {"49": ""}], "ctags": [{"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^      const msg = e instanceof Error ? e.message : 'Failed to load weather'$/", "language": "TypeScript", "kind": "constant", "scope": "buildStore", "scopeKind": "function"}, {"_type": "tag", "name": "LocationResult", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^import { getCurrentAndForecast, type WeatherResponse, type LocationResult } from '.\\/WeatherServ/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "UNIT_KEY", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^const UNIT_KEY = 'weather.units'$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "UnitPref", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^type UnitPref = Units$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "WeatherResponse", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^import { getCurrentAndForecast, type WeatherResponse, type LocationResult } from '.\\/WeatherServ/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "Window", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^  interface Window {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "__weatherStore", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^    __weatherStore?: unknown$/", "language": "TypeScript", "kind": "property", "scope": "Window", "scopeKind": "interface"}, {"_type": "tag", "name": "buildStore", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^function buildStore() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "e", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^      const msg = e instanceof Error ? e.message : 'Failed to load weather'$/", "language": "TypeScript", "kind": "constant", "scope": "buildStore", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^  const error = ref<string | null>(null)$/", "language": "TypeScript", "kind": "constant", "scope": "buildStore", "scopeKind": "function"}, {"_type": "tag", "name": "hasData", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^  const hasData = computed(() => !!weather.value && !!location.value)$/", "language": "TypeScript", "kind": "constant", "scope": "buildStore", "scopeKind": "function"}, {"_type": "tag", "name": "initialUnits", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^  const initialUnits = (localStorage.getItem(UNIT_KEY) as UnitPref | null) ?? 'metric'$/", "language": "TypeScript", "kind": "constant", "scope": "buildStore", "scopeKind": "function"}, {"_type": "tag", "name": "instanceof", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^      const msg = e instanceof Error ? e.message : 'Failed to load weather'$/", "language": "TypeScript", "kind": "constant", "scope": "buildStore", "scopeKind": "function"}, {"_type": "tag", "name": "lastUpdated", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^  const lastUpdated = ref<Date | null>(null)$/", "language": "TypeScript", "kind": "constant", "scope": "buildStore", "scopeKind": "function"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^  const loading = ref<boolean>(false)$/", "language": "TypeScript", "kind": "constant", "scope": "buildStore", "scopeKind": "function"}, {"_type": "tag", "name": "location", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^  const location = ref<LocationResult | null>(null)$/", "language": "TypeScript", "kind": "constant", "scope": "buildStore", "scopeKind": "function"}, {"_type": "tag", "name": "msg", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^      const msg = e instanceof Error ? e.message : 'Failed to load weather'$/", "language": "TypeScript", "kind": "constant", "scope": "buildStore", "scopeKind": "function"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^  const state = reactive({$/", "language": "TypeScript", "kind": "constant", "scope": "buildStore", "scopeKind": "function"}, {"_type": "tag", "name": "store", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^  const store = buildStore()$/", "language": "TypeScript", "kind": "constant", "scope": "useWeatherStore", "scopeKind": "function"}, {"_type": "tag", "name": "units", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^  const units = ref<UnitPref>(initialUnits)$/", "language": "TypeScript", "kind": "constant", "scope": "buildStore", "scopeKind": "function"}, {"_type": "tag", "name": "useWeatherStore", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^export function useWeatherStore() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "weather", "path": "/home/kavia/workspace/code-generation/weather-view-42467-42476/weather_frontend/src/weather/useWeatherStore.ts", "pattern": "/^  const weather = ref<WeatherResponse | null>(null)$/", "language": "TypeScript", "kind": "constant", "scope": "buildStore", "scopeKind": "function"}], "hash": "9f0de64ce55d21110efcfadd1ca6805a", "format-version": 4, "code-base-name": "weather_frontend", "filename": "weather_frontend/src/weather/useWeatherStore.ts", "fields": [{"name": "interface Window {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__weatherStore?: unknown", "scope": "Window", "scopeKind": "interface", "description": "unavailable"}]}